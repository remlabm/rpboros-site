(function(c,b,a){c.fn.jScrollPane=function(e){function d(p,G){var z,I=this,aH,ac,ax,ae,aC,aI,g,at,J,O,q,ak,A,aj,al,S,aD,h,aG,av,j,i,X,af,w,an,o,x,az,t,R,f,D,ab=true,H=true,Q=false,am=false,ah=p.clone(false,false).empty(),U=c.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";R=p.css("paddingTop")+" "+p.css("paddingRight")+" "+p.css("paddingBottom")+" "+p.css("paddingLeft");f=(parseInt(p.css("paddingLeft"),10)||0)+(parseInt(p.css("paddingRight"),10)||0);function l(aP){var aK,aM,aL,s,aQ,aO,aN=false,aJ=false;z=aP;if(aH===a){aQ=p.scrollTop();aO=p.scrollLeft();p.css({overflow:"hidden",padding:0});ac=p.innerWidth()+f;ax=p.innerHeight();p.width(ac);aH=c('<div class="jspPane" />').css("padding",R).append(p.children());ae=c('<div class="jspContainer" />').css({width:ac+"px",height:ax+"px"}).append(aH).appendTo(p)}else{p.css("width","");aN=z.stickToBottom&&C();aJ=z.stickToRight&&k();s=p.innerWidth()+f!=ac||p.outerHeight()!=ax;if(s){ac=p.innerWidth()+f;ax=p.innerHeight();ae.css({width:ac+"px",height:ax+"px"})}if(!s&&D==aC&&aH.outerHeight()==aI){p.width(ac);return}D=aC;aH.css("width","");p.width(ac);ae.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}aH.css("overflow","auto");if(aP.contentWidth){aC=aP.contentWidth}else{aC=aH[0].scrollWidth}aI=aH[0].scrollHeight;aH.css("overflow","");g=aC/ac;at=aI/ax;J=at>1;O=g>1;if(!(O||J)){p.removeClass("jspScrollable");aH.css({top:0,width:ae.width()-f});ap();r();aA();ay();aa()}else{p.addClass("jspScrollable");aK=z.maintainPosition&&(A||S);if(aK){aM=M();aL=K()}P();n();u();if(aK){F(aJ?(aC-ac):aM,false);E(aN?(aI-ax):aL,false)}B();Y();ag();if(z.enableKeyboardNavigation){aB()}if(z.clickOnTrack){ar()}m();if(z.hijackInternalLinks){ao()}}if(z.autoReinitialise&&!t){t=setInterval(function(){l(z)},z.autoReinitialiseDelay)}else{if(!z.autoReinitialise&&t){clearInterval(t)}}aQ&&p.scrollTop(0)&&E(aQ,false);aO&&p.scrollLeft(0)&&F(aO,false);p.trigger("jsp-initialised",[O||J])}function P(){if(J){ae.append(c('<div class="jspVerticalBar" />').append(c('<div class="jspCap jspCapTop" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragTop" />'),c('<div class="jspDragBottom" />'))),c('<div class="jspCap jspCapBottom" />')));aD=ae.find(">.jspVerticalBar");h=aD.find(">.jspTrack");q=h.find(">.jspDrag");if(z.showArrows){i=c('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",N(0,-1)).bind("click.jsp",L);X=c('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",N(0,1)).bind("click.jsp",L);if(z.arrowScrollOnHover){i.bind("mouseover.jsp",N(0,-1,i));X.bind("mouseover.jsp",N(0,1,X))}ad(h,z.verticalArrowPositions,i,X)}av=ax;ae.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){av-=c(this).outerHeight()});q.hover(function(){q.addClass("jspHover")},function(){q.removeClass("jspHover")}).bind("mousedown.jsp",function(s){c("html").bind("dragstart.jsp selectstart.jsp",L);q.addClass("jspActive");var aJ=s.pageY-q.position().top;c("html").bind("mousemove.jsp",function(aK){aE(aK.pageY-aJ,false)}).bind("mouseup.jsp mouseleave.jsp",v);return false});aq()}}function aq(){h.height(av+"px");A=0;aG=z.verticalGutter+h.outerWidth();aH.width(ac-aG-f);try{if(aD.position().left===0){aH.css("margin-left",aG+"px")}}catch(s){}}function n(){if(O){ae.append(c('<div class="jspHorizontalBar" />').append(c('<div class="jspCap jspCapLeft" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragLeft" />'),c('<div class="jspDragRight" />'))),c('<div class="jspCap jspCapRight" />')));af=ae.find(">.jspHorizontalBar");w=af.find(">.jspTrack");aj=w.find(">.jspDrag");if(z.showArrows){x=c('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",N(-1,0)).bind("click.jsp",L);az=c('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",N(1,0)).bind("click.jsp",L);if(z.arrowScrollOnHover){x.bind("mouseover.jsp",N(-1,0,x));az.bind("mouseover.jsp",N(1,0,az))}ad(w,z.horizontalArrowPositions,x,az)}aj.hover(function(){aj.addClass("jspHover")},function(){aj.removeClass("jspHover")}).bind("mousedown.jsp",function(s){c("html").bind("dragstart.jsp selectstart.jsp",L);aj.addClass("jspActive");var aJ=s.pageX-aj.position().left;c("html").bind("mousemove.jsp",function(aK){aF(aK.pageX-aJ,false)}).bind("mouseup.jsp mouseleave.jsp",v);return false});an=ae.innerWidth();Z()}}function Z(){ae.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){an-=c(this).outerWidth()});w.width(an+"px");S=0}function u(){if(O&&J){var s=w.outerHeight(),aJ=h.outerWidth();av-=s;c(af).find(">.jspCap:visible,>.jspArrow").each(function(){an+=c(this).outerWidth()});an-=aJ;ax-=aJ;ac-=s;w.parent().append(c('<div class="jspCorner" />').css("width",s+"px"));aq();Z()}if(O){aH.width((ae.outerWidth()-f)+"px")}aI=aH.outerHeight();at=aI/ax;if(O){o=Math.ceil(1/g*an);if(o>z.horizontalDragMaxWidth){o=z.horizontalDragMaxWidth}else{if(o<z.horizontalDragMinWidth){o=z.horizontalDragMinWidth}}aj.width(o+"px");al=an-o;W(S)}if(J){j=Math.ceil(1/at*av);if(j>z.verticalDragMaxHeight){j=z.verticalDragMaxHeight}else{if(j<z.verticalDragMinHeight){j=z.verticalDragMinHeight}}q.height(j+"px");ak=av-j;V(A)}}function ad(aJ,aL,s,aM){var aO="before",aK="after",aN;if(aL=="os"){aL=/Mac/.test(navigator.platform)?"after":"split"}if(aL==aO){aK=aL}else{if(aL==aK){aO=aL;aN=s;s=aM;aM=aN}}aJ[aO](s)[aK](aM)}function N(s,aK,aJ){return function(){y(s,aK,this,aJ);this.blur();return false}}function y(aK,aJ,aO,aN){aO=c(aO).addClass("jspActive");var aL,s,aP=true,aM=function(){if(aK!==0){I.scrollByX(aK*z.arrowButtonSpeed)}if(aJ!==0){I.scrollByY(aJ*z.arrowButtonSpeed)}s=setTimeout(aM,aP?z.initialDelay:z.arrowRepeatFreq);aP=false};aM();aL=aN?"mouseout.jsp":"mouseup.jsp";aN=aN||c("html");aN.bind(aL,function(){aO.removeClass("jspActive");s&&clearTimeout(s);s=null;aN.unbind(aL)})}function ar(){ay();if(J){h.bind("mousedown.jsp",function(aN){if(aN.originalTarget===a||aN.originalTarget==aN.currentTarget){var aK=c(this),aO=aK.offset(),aL=aN.pageY-aO.top-A,s,aP=true,aM=function(){var aT=aK.offset(),aQ=aN.pageY-aT.top-j/2,aR=ax*z.scrollPagePercent,aS=ak*aR/(aI-ax);if(aL<0){if(A-aS>aQ){I.scrollByY(-aR)}else{aE(aQ)}}else{if(aL>0){if(A+aS<aQ){I.scrollByY(aR)}else{aE(aQ)}}else{aJ();return}}s=setTimeout(aM,aP?z.initialDelay:z.trackClickRepeatFreq);aP=false},aJ=function(){s&&clearTimeout(s);s=null;c(document).unbind("mouseup.jsp",aJ)};aM();c(document).bind("mouseup.jsp",aJ);return false}})}if(O){w.bind("mousedown.jsp",function(aN){if(aN.originalTarget===a||aN.originalTarget==aN.currentTarget){var aK=c(this),aO=aK.offset(),aL=aN.pageX-aO.left-S,s,aP=true,aM=function(){var aT=aK.offset(),aQ=aN.pageX-aT.left-o/2,aR=ac*z.scrollPagePercent,aS=al*aR/(aC-ac);if(aL<0){if(S-aS>aQ){I.scrollByX(-aR)}else{aF(aQ)}}else{if(aL>0){if(S+aS<aQ){I.scrollByX(aR)}else{aF(aQ)}}else{aJ();return}}s=setTimeout(aM,aP?z.initialDelay:z.trackClickRepeatFreq);aP=false},aJ=function(){s&&clearTimeout(s);s=null;c(document).unbind("mouseup.jsp",aJ)};aM();c(document).bind("mouseup.jsp",aJ);return false}})}}function ay(){if(w){w.unbind("mousedown.jsp")}if(h){h.unbind("mousedown.jsp")}}function v(){c("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(q){q.removeClass("jspActive")}if(aj){aj.removeClass("jspActive")}}function aE(aJ,s){if(!J){return}if(aJ<0){aJ=0}else{if(aJ>ak){aJ=ak}}if(s===a){s=z.animateScroll}if(s){I.animate(q,"top",aJ,V)}else{q.css("top",aJ);V(aJ)}}function V(s){if(s===a){s=q.position().top}ae.scrollTop(0);A=s;var aL=A===0,aJ=A==ak,aK=s/ak,aM=-aK*(aI-ax);if(ab!=aL||Q!=aJ){ab=aL;Q=aJ;p.trigger("jsp-arrow-change",[ab,Q,H,am])}aw(aL,aJ);aH.css("top",aM);p.trigger("jsp-scroll-y",[-aM,aL,aJ]).trigger("scroll")}function aF(s,aJ){if(!O){return}if(s<0){s=0}else{if(s>al){s=al}}if(aJ===a){aJ=z.animateScroll}if(aJ){I.animate(aj,"left",s,W)}else{aj.css("left",s);W(s)}}function W(s){if(s===a){s=aj.position().left}ae.scrollTop(0);S=s;var aL=S===0,aK=S==al,aJ=s/al,aM=-aJ*(aC-ac);if(H!=aL||am!=aK){H=aL;am=aK;p.trigger("jsp-arrow-change",[ab,Q,H,am])}au(aL,aK);aH.css("left",aM);p.trigger("jsp-scroll-x",[-aM,aL,aK]).trigger("scroll")}function aw(s,aJ){if(z.showArrows){i[s?"addClass":"removeClass"]("jspDisabled");X[aJ?"addClass":"removeClass"]("jspDisabled")}}function au(s,aJ){if(z.showArrows){x[s?"addClass":"removeClass"]("jspDisabled");az[aJ?"addClass":"removeClass"]("jspDisabled")}}function E(aK,s){var aJ=aK/(aI-ax);aE(aJ*ak,s)}function F(s,aK){var aJ=s/(aC-ac);aF(aJ*al,aK)}function T(aS,aN,aV){var aK,aW,s,aU=0,aR=0,aT,aM,aL,aP,aO,aQ;try{aK=c(aS)}catch(aJ){return}aW=aK.outerHeight();s=aK.outerWidth();ae.scrollTop(0);ae.scrollLeft(0);while(!aK.is(".jspPane")){aU+=aK.position().top;aR+=aK.position().left;aK=aK.offsetParent();if(/^body|html$/i.test(aK[0].nodeName)){return}}aT=K();aL=aT+ax;if(aU<aT||aN){aO=aU-z.verticalGutter}else{if(aU+aW>aL){aO=aU-ax+aW+z.verticalGutter}}if(aO){E(aO,aV)}aM=M();aP=aM+ac;if(aR<aM||aN){aQ=aR-z.horizontalGutter}else{if(aR+s>aP){aQ=aR-ac+s+z.horizontalGutter}}if(aQ){F(aQ,aV)}}function M(){return -aH.position().left}function K(){return -aH.position().top}function C(){var s=aI-ax;return(s>20)&&(s-K()<10)}function k(){var s=aC-ac;return(s>20)&&(s-M()<10)}function Y(){ae.unbind(U).bind(U,function(aL,aM,aK,s){var aJ=S,aN=A;I.scrollBy(aK*z.mouseWheelSpeed,-s*z.mouseWheelSpeed,false);return aJ==S&&aN==A})}function ap(){ae.unbind(U)}function L(){return false}function B(){aH.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){T(s.target,false)})}function r(){aH.find(":input,a").unbind("focus.jsp")}function aB(){var aL,s,aK=[];O&&aK.push(af[0]);J&&aK.push(aD[0]);aH.focus(function(){p.focus()});p.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aO){if(aO.target!==this&&!(aK.length&&c(aO.target).closest(aK).length)){return}var aN=S,aM=A;switch(aO.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:aL=aO.keyCode;aJ();break;case 35:E(aI-ax);aL=null;break;case 36:E(0);aL=null;break}s=aO.keyCode==aL&&aN!=S||aM!=A;return !s}).bind("keypress.jsp",function(aM){if(aM.keyCode==aL){aJ()}return !s});if(z.hideFocus){p.css("outline","none");if("hideFocus" in ae[0]){p.attr("hideFocus",true)}}else{p.css("outline","");if("hideFocus" in ae[0]){p.attr("hideFocus",false)}}function aJ(){var aN=S,aM=A;switch(aL){case 40:I.scrollByY(z.keyboardSpeed,false);break;case 38:I.scrollByY(-z.keyboardSpeed,false);break;case 34:case 32:I.scrollByY(ax*z.scrollPagePercent,false);break;case 33:I.scrollByY(-ax*z.scrollPagePercent,false);break;case 39:I.scrollByX(z.keyboardSpeed,false);break;case 37:I.scrollByX(-z.keyboardSpeed,false);break}s=aN!=S||aM!=A;return s}}function aA(){p.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function m(){if(location.hash&&location.hash.length>1){var aK,s,aJ=escape(location.hash);try{aK=c(aJ)}catch(aL){return}if(aK.length&&aH.find(aJ)){if(ae.scrollTop()===0){s=setInterval(function(){if(ae.scrollTop()>0){T(aJ,true);c(document).scrollTop(ae.position().top);clearInterval(s)}},50)}else{T(aJ,true);c(document).scrollTop(ae.position().top)}}}}function aa(){c("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function ao(){aa();c("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var aJ=this.href.split("#"),s;if(aJ.length>1){s=aJ[1];if(s.length>0&&aH.find("#"+s).length>0){T("#"+s,true);return false}}})}function ag(){var aJ,s,aL,aK,aM,aN=false;ae.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aP){var aO=aP.originalEvent.touches[0];aJ=M();s=K();aL=aO.pageX;aK=aO.pageY;aM=false;aN=true}).bind("touchmove.jsp",function(aO){if(!aN){return}var aR=aO.originalEvent.touches[0],aQ=S,aP=A;I.scrollTo(aJ+aL-aR.pageX,s+aK-aR.pageY);aM=aM||Math.abs(aL-aR.pageX)>5||Math.abs(aK-aR.pageY)>5;return aQ==S&&aP==A}).bind("touchend.jsp",function(aO){aN=false}).bind("click.jsp-touchclick",function(aO){if(aM){aM=false;return false}})}function ai(){var aJ=K(),s=M();p.removeClass("jspScrollable").unbind(".jsp");p.replaceWith(ah.append(aH.children()));ah.scrollTop(aJ);ah.scrollLeft(s)}c.extend(I,{reinitialise:function(s){s=c.extend({},z,s);l(s)},scrollToElement:function(aJ,s,aK){T(aJ,s,aK)},scrollTo:function(aJ,aK,s){F(aJ,s);E(aK,s)},scrollToX:function(s,aJ){F(s,aJ)},scrollToY:function(aJ,s){E(aJ,s)},scrollToPercentX:function(s,aJ){F(s*(aC-ac),aJ)},scrollToPercentY:function(s,aJ){E(s*(aI-ax),aJ)},scrollBy:function(s,aK,aJ){I.scrollByX(s,aJ);I.scrollByY(aK,aJ)},scrollByX:function(aL,aJ){var s=M()+Math[aL<0?"floor":"ceil"](aL),aK=s/(aC-ac);aF(aK*al,aJ)},scrollByY:function(aL,aJ){var s=K()+Math[aL<0?"floor":"ceil"](aL),aK=s/(aI-ax);aE(aK*ak,aJ)},positionDragX:function(aJ,s){aF(aJ,s)},positionDragY:function(s,aJ){aE(s,aJ)},animate:function(s,aL,aM,aK){var aJ={};aJ[aL]=aM;s.animate(aJ,{duration:z.animateDuration,easing:z.animateEase,queue:false,step:aK})},getContentPositionX:function(){return M()},getContentPositionY:function(){return K()},getContentWidth:function(){return aC},getContentHeight:function(){return aI},getPercentScrolledX:function(){return M()/(aC-ac)},getPercentScrolledY:function(){return K()/(aI-ax)},getIsScrollableH:function(){return O},getIsScrollableV:function(){return J},getContentPane:function(){return aH},scrollToBottom:function(s){aE(ak,s)},hijackInternalLinks:function(){ao()},destroy:function(){ai()}});l(G)}e=c.extend({},c.fn.jScrollPane.defaults,e);c.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=c(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{g=new d(f,e);f.data("jsp",g)}})};c.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:a,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);